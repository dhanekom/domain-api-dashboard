{{ block "base" . }}
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="/public/css/styles.css">
  <script src="/public/javascript/htmx.min.js"></script>
  <title>Domain-API Dashboard</title>
</head>
<body class="bg-gray-100 text-gray-900">
  <div class="">
    <div class="m-auto w-full">
      <nav class="bg-white flex flex-row items-center">
        <div id="logo" class="p-4">
          <img src="/public/img/xneelo-log.webp" alt="" class="w-full object-cover">
        </div>
      </nav>
    </div>

    <main class="max-w-screen-lg mx-auto">
      <div class="m-4">
        <div class="flex items-center">
          <label class="w-1/6 text-right" for="search">Search:</label>
          <input
            type="search"
            id="search"
            name="search"
            class="w-5/6 pr-4 w-full ml-2 p-2 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-gray-500 focus:border-gray-500" placeholder="Enter Domain name (min 3 character required)..."
            hx-post="/search"  
            hx-target="#search-results"
            hx-trigger="input changed delay:500ms, search"
            hx-indicator="#loading"
          >
        </div>
  
        <div class="relative overflow-x-auto rounded mt-4">
            <table class="w-full text-sm text-left rtl:text-right">
                <thead class="text-xs text-gray-700 uppercase bg-gray-50">
                    <tr>
                        <th scope="col" class="px-6 py-3">
                            Domain Name
                        </th>
                        <th scope="col" class="px-6 py-3">
                            Account No
                        </th>
                        <th scope="col" class="px-6 py-3">
                            Client No
                        </th>
                        <th scope="col" class="px-6 py-3 text-center">
                            Bill for Reg
                        </th>
                        <th scope="col" class="px-6 py-3">
                            Status
                        </th>
                        <th scope="col" class="px-6 py-3">
                            Active
                        </th>
                    </tr>
                </thead>
                <tbody id="search-results">
  
                </tbody>
            </table>
            <span id="loading" class="htmx-indicator">
              <img src="/public/img/loading.gif" alt="loading..." class="mt-2 m-auto h-10">
            </span>
        </div>
      </div>
    </main>
  </div>

  <script>
    document.body.addEventListener('htmx:beforeRequest', function(evt){
      const search = document.getElementById("search");
      const searchResults = document.getElementById("search-results");
      if (searchResults) {
        searchResults.innerHTML = "";
      }

      if (search.value.length < 3) {
        // evt.preventDefault() cancels the request
        evt.preventDefault();
        return
      }
    });
  </script>
</body>
</html>
{{ end }}